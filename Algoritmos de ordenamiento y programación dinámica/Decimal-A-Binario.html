<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>   
</head>
<body>
    <script>
       
       function Stack(){
            let items = []; // Iniciamos con un arreglo vacío al cual se le irán agregando elementos uno a uno. 

            // Se usarán estos métodos: 
            // push() para agregar elementos. 
            // pop() para eliminar elementos. 
            // last() para obtener el último elemento insertado. 
            // hasElements() para verificar si la pila tiene elementos. 
            // size() para saber el tamaño de la pila.
            // print() para imprimir la pila en cadena de caracteres o “string“.
            // clear() para limpiar la pila. 

            this.push = element => { // Se utiliza una función flecha para utilizar el método push()
                items.push(element); // Aquí es donde se van agregando los elementos al arreglo “items“. El parámetro “elements“ se le pasa
                                     // como argumento para indicarle qué datos debe agregar al arreglo o pila. 
            };

            this.pop = () => { // Se utiliza una función flecha para utilizar el método pop(). No se le pasa ningún argumento, ya que no requiere ningún parámetro. 
                return this.hasElements ? items.pop() : false ; // Aquí se remueve o elimina el último elemento agregado a la pila. 
                                                                // El método pop() simplemente elimina el último dato agregado a un arreglo 
                                                                //  o pila sin necesidad de especificarle qué elemento debe eliminar. 

                                                                // Se utiliza un operador ternario para verificar si la pila tiene datos 
                                                                // dentro de ella y de ser así, se extraen los datos con pop(), pero de ser lo
                                                                // contrario, entonces retorna “false“ y no extrae ningún dato. 
            };

            this.last = () => {
                return items[items.length - 1]; // Se le pide que retorne el último elemento que quede aún dentro del arreglo 
                                                // Se le resta 1 a la longitud total del arreglo, ya que se busca retornar el último 
                                                // elemento que quede y por lo tanto, no se puede llegar hasta el índice 0 del arreglo.
            };

            this.hasElements = () => {
                return items.length > 0; // Se compara la longitud del arreglo con 0 para verificar si todavía quedan datos o elementos
                                         // dentro del arreglo. 
            };

            this.size = () => {
                return items.length; // Nos dará información sobre el tamaño total de toda la pila. 
            };

            this.print = () => {
                return items.toString(); // Se utiliza este método para convertir la pila o arreglo a cadena de caracteres o “string“.
            };

            this.clear = () => {
                items = []; // Se vuelve a asignar un arreglo vacío para empezar de nuevo. 
            }
        }

        function FloatToBinary(float){ 
            if(float === 0){ // Con este condicional, comparamos si el número que nos están mandando como argumento es igual a 0.
                return '0'; // De ser esto cierto, entonces la función debe retornar 0, ya que no hay decimal válido para convertir al sistema binario. 
            }

            const stack = new Stack(); // Aquí utilizo el Stack() importado previamente del archivo Pilas.html a este archivo.
            let rem; // Esta variable será utilizada para almacenar los residuos de las divisiones entre los decimales.
            let binaryString = ''; // Esta variable almacenará los números binarios como tal. 

            while (float > 0) { // En este ciclo “while“ indicaremos la condición que se cumplirá solamente si el número decimal es mayor a 0.
                rem = Math.floor(float % 2); // Inicializamos la variable antes declarada como “rem“ y usamos el método matemático Math.floor() para redondear el residuo que quede de la división etre 2.
                                             // Sólo debería regresarnos 0 o 1, ya que así funciona el sistema binario. 
                
                // Empezamos a agregar datos a la pila: 
                stack.push(rem); // Guardamos en la pila el valor devuelto por la variable “rem“ usando el método push()
                
                // Dividimos entre 2: 
                float = Math.floor(float / 2); // Aquí se va a dividir el número decimal entre 2 y sólo nos quedaremos con la parte entera gracias al método Math.floor()
            }

            // Volvemos a usar otro ciclo “while“ para establecer como condición fundamental que se ejecute el código mientras la pila aún tenga elementos.
            while (stack.hasElements()) {
                binaryString += stack.pop().toString(); // Se concatenan los números binarios en formato “string“ o como cadena de caracteres
                                                        // Se utiliza el método pop() para extraer el último número presente en la pila y luego
                                                        // convertirlo en formato de cadena de caracteres. 
            }

            return binaryString; 
        }

        console.log(FloatToBinary(4.7));
    </script>
</body>
</html>